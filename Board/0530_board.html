<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Board</title>
<link rel="shortcut icon" type="image/x-icon" href="../images/J.png"/>
<script src="../js/board.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <link rel="stylesheet" href="../css/public_blue.css"> -->
<link rel="shortcut icon" type="image/x-icon" href="../images/J.png"/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="../js/jquery.serializejson.min.js"></script>
<script>
$(function(){
	//list출력
// 	listServer(); // 'js/board.js'의 listServer가 실행
		listPageServer(1);
	
	//이벤트
	$('#d1').on('click', '.action', function(){
		
		name = $(this).attr('name');
		idx = $(this).attr('idx');
		
		if(name == "edit"){
			alert(idx + "번 글 수정");
		}else if(name == "delete"){
			alert(idx + "번 글 삭제");
		}else if(name == "reply"){
			alert(idx + "번 글에 댓글 작성");
		}
	})
	
	//페이지 번호 이벤트
	$('#pageList').on('click', '.pager', function(){
// 		alert($(this).text());
			currentPage = $(this).text();
			listPageServer(currentPage);
	})
	
	//검색 이벤트
	$('#search').on('click', function(){
		currentPage = 1;
		listPageServer(currentPage);
	})
	
	//다음 버튼 이벤트
	$('#pageList').on('click', '.nxt', function(){
		currentPage = parseInt($('.pager a').last().text().trim())+1;
		listPageServer(currentPage);
	})
	
	//이전 버튼 이벤트
	$('#pageList').on('click', '.prev', function(){
		currentPage = parseInt($('.pager a').first().text().trim())-1;
		listPageServer(currentPage);
	})
	
	//글쓰기 모달 창에서 전송 버튼 이벤트
	$('#fsend').on('click', function(){
		
		//입력한 모든 값 가져오기
		formData = $('#wform').serializeJSON();
		
		$.ajax({
			url : '/BoardPro/Write.do',
			data : formData,
			type : 'post', 
			success : function(res){
				alert(res.sw);
			},
			dataType : 'json',
			error : function(xhr){
				alert("상태 : " + xhr.status);
			}
		})
	})
})
</script>
<style type="text/css">
@import url('https://fonts.googleapis.com/css2?family=Gowun+Batang&display=swap');
body *{
	font-family: 'Gowun Batang', serif;
}
pre {
	font-family: 'Gowun Batang', serif;
}
body{
	padding : 20px;
}
p {
	margin: 1px;
	padding: 5px;
	height: auto;
}
.p1{
	width : 70%;
	float : left;
}
.p2{
	width : 25%;
	float : right;
	text-align: right;
}
.p3{
	clear : both;
}
input[type=button]{
	width : 70px;
}
input[name=reply]{
	vertical-align: top;
}
#stype{
	width: 100px;
	float : left;
}
.navbar , input[value=글쓰기]{
	margin-left : 20px;
}
br{
	clear : both;
}
h2{
	margin-left : 10%;
}
#pageList{
	text-align: center;
}
label{
	display: inline-block;
	width: 100px;
	height: 30px;
}
</style>
</head>
<body>


<pre>
게시판 만들어보기~
</pre>

<h2>게시판</h2>
<br><br>
<input type="button" value="글쓰기" id="write" data-toggle="modal" data-target="#writeModal">
<br><br>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
	<select class="form-control" id="stype">
    	<option value="">전체</option>
    	<option value="writer">이름</option>
    	<option value="subject">제목</option>
    	<option value="content">내용</option>
  	</select>
  
	<form class="form-inline">
		<input id="sword" class="form-contrl mr-sm-2" type="text" placeholder="Search">
		<button id="search" class="btn btn-warning" type="submit">Search</button>
	</form>
</nav>

<br><br>
<div id = "d1">
</div>
<br><br>
<div id = "pageList">
</div>


<!-- 글쓰기 Modal -->
<div class="modal" id="writeModal">
	<div class="modal-dialog">
		<div class="modal-content">

			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title">Modal Heading</h4>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>

			<!-- Modal body -->
			<div class="modal-body">
				<form id="wform">
					<label>작성자</label>
					<input type="text" name="writer" placeholder="작성자 아이디를 입력해주세요."><br>
					
					<label>제목</label>
					<input type="text" name="subject" placeholder="제목을 입력해주세요."><br>
					
					<label>비밀번호</label>
					<input type="text" name="password" placeholder="비밀번호를 입력해주세요."><br>
					
					<label>이메일</label>
					<input type="text" name="mail" placeholder="이메일을 입력해주세요."><br>
					
					<label>내용</label>
					<textarea rows="10" cols="50" name="content"></textarea><br>
					<input type='button' value="전송" id="fsend">
					
				</form>
			</div>

			<!-- Modal footer -->
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

</body>
</html>
